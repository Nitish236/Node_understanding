const teachers = require("../teachersData");

// Send all teachers data
function getAllTeachers(req, res){
    res.send(teachers);
}

// Create New Teacher
function newTeacher(req, res){
    const { name, subject, years } = req.body;

    const teacher = {
        id : teachers.length+1,
        name : name,
        subject : subject,
        years : years,
        batches : ["B1"],
        salary : 35000
    }

    teachers.push(teacher);

    res.status(201).send("New teacher created");
}

// Get teacher by id
function getById(req, res){
    const teacherID = req.params.id;

    const teacher = teachers.find(({id}) => id === Number(teacherID) );

    if(!teacher) res.status(404).send("Teacher not found");

    res.status(200).send(JSON.stringify(teacher));
}

// Update Teacher
function updateTeacher(req, res){
    const teacherID = req.params.id ;

    const {subject, years, batches, salary} = req.body;

    let teacher = teachers.find(({id}) => id===Number(teacherID));

    if(!teacher){
        res.status(404).send("No such teacher exist");
    }

    teacher.subject = subject;
    teacher.years = years;
    teacher.batches = batches;
    teacher.salary = salary;

    console.log(teacher);
    res.status(201).end(JSON.stringify(teacher));
}

// Delete Student
function deleteTeacher(req, res){
    const teacherID = req.params.id ;

    const teacher = teachers.find(({id}) => id===Number(teacherID));

    if(!teacher){
        res.status(404).send("No such teacher exist");
    }

    console.log(teacher);
    res.send("Deleted");
}

module.exports = {
    getAllTeachers,
    newTeacher,
    getById,
    updateTeacher,
    deleteTeacher,
}